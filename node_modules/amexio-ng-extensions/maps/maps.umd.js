(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(require('@angular/core'),require('@angular/common'),exports, require('@angular/core'), require('@angular/common'), require('rxjs/Observable')) :
	typeof define === 'function' && define.amd ? define(['@angular/core','@angular/common','exports', '@angular/core', '@angular/common', 'rxjs/Observable'], factory) :
	(factory(global.ng.core,global.ng.common,(global.maps = {}),global._angular_core,global._angular_common,global.rxjs_Observable));
}(this, (function (ɵngcc0,ɵngcc1,exports,_angular_core,_angular_common,rxjs_Observable) { 
function GeoChartComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "div", 1);
} }
function TreeMapComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "div", 2);
} }
var _c0 = ".lmask[_ngcontent-%COMP%] {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    background-color: #000;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    top: 0;\n    z-index: 9999;\n    opacity: 0.4;\n  }\n  .lmask.fixed[_ngcontent-%COMP%] {\n    position: fixed;\n  }\n  .lmask[_ngcontent-%COMP%]:before {\n    content: '';\n    background-color: transparent;\n    border: 5px solid rgba(0, 183, 229, 0.9);\n    opacity: .9;\n    border-right: 5px solid transparent;\n    border-left: 5px solid transparent;\n    border-radius: 50px;\n    box-shadow: 0 0 35px #2187e7;\n    width: 50px;\n    height: 50px;\n    -moz-animation: spinPulse 1s infinite ease-in-out;\n    -webkit-animation: spinPulse 1s infinite linear;\n    margin: -25px 0 0 -25px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n  }\n  .lmask[_ngcontent-%COMP%]:after {\n    content: '';\n    background-color: transparent;\n    border: 5px solid rgba(0, 183, 229, 0.9);\n    opacity: .9;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-radius: 50px;\n    box-shadow: 0 0 15px #2187e7;\n    width: 30px;\n    height: 30px;\n    -moz-animation: spinoffPulse 1s infinite linear;\n    -webkit-animation: spinoffPulse 1s infinite linear;\n    margin: -15px 0 0 -15px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n  }\n\n  @-moz-keyframes spinPulse {\n    0% {\n      -moz-transform: rotate(160deg);\n      opacity: 0;\n      box-shadow: 0 0 1px #2187e7;\n    }\n    50% {\n      -moz-transform: rotate(145deg);\n      opacity: 1;\n    }\n    100% {\n      -moz-transform: rotate(-320deg);\n      opacity: 0;\n    }\n  }\n  @-moz-keyframes spinoffPulse {\n    0% {\n      -moz-transform: rotate(0deg);\n    }\n    100% {\n      -moz-transform: rotate(360deg);\n    }\n  }\n  @-webkit-keyframes spinPulse {\n    0% {\n      -webkit-transform: rotate(160deg);\n      opacity: 0;\n      box-shadow: 0 0 1px #2187e7;\n    }\n    50% {\n      -webkit-transform: rotate(145deg);\n      opacity: 1;\n    }\n    100% {\n      -webkit-transform: rotate(-320deg);\n      opacity: 0;\n    }\n  }\n  @-webkit-keyframes spinoffPulse {\n    0% {\n      -webkit-transform: rotate(0deg);\n    }\n    100% {\n      -webkit-transform: rotate(360deg);\n    }\n  }";
'use strict';

/*
 * Copyright 2016-2017 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Author - Sagar Jadhav
 *
 */
var MapProperties = (function () {
    function MapProperties() {
    }
    /**
     * @return {?}
     */
    MapProperties.prototype.ngOnInit = function () {
    };
MapProperties.ɵfac = function MapProperties_Factory(t) { return new (t || MapProperties)(); };
MapProperties.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MapProperties, selectors: [["amexio-map-properties"]], inputs: { chartBackgroundColor: "chartBackgroundColor", leftPosition: "leftPosition", topPosition: "topPosition", chartWidthInPer: "chartWidthInPer", chartHeightInper: "chartHeightInper" }, decls: 0, vars: 0, template: function MapProperties_Template(rf, ctx) { }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapProperties, [{
        type: _angular_core.Component,
        args: [{
                selector: 'amexio-map-properties',
                template: ""
            }]
    }], function () { return []; }, { chartBackgroundColor: [{
            type: _angular_core.Input
        }], leftPosition: [{
            type: _angular_core.Input
        }], topPosition: [{
            type: _angular_core.Input
        }], chartWidthInPer: [{
            type: _angular_core.Input
        }], chartHeightInper: [{
            type: _angular_core.Input
        }] }); })();
    return MapProperties;
}());
/**
 * @nocollapse
 */
MapProperties.ctorParameters = function () { return []; };
MapProperties.propDecorators = {
    'chartBackgroundColor': [{ type: _angular_core.Input },],
    'leftPosition': [{ type: _angular_core.Input },],
    'topPosition': [{ type: _angular_core.Input },],
    'chartWidthInPer': [{ type: _angular_core.Input },],
    'chartHeightInper': [{ type: _angular_core.Input },],
};

/**
 * Created by pratik on 17/8/17.
 */
var MapLoaderService = (function () {
    function MapLoaderService() {
        this.chartPackage = {
            AreaChart: 'corechart',
            Bar: 'bar',
            BarChart: 'corechart',
            ColumnChart: 'corechart',
            PieChart: 'corechart',
            Gantt: 'gantt',
            Gauge: 'gauge',
            GeoChart: 'geochart',
            Histogram: 'corechart',
            Line: 'line',
            LineChart: 'corechart',
            Map: 'map',
            Timeline: 'timeline',
            BubbleChart: 'corechart',
            CandlestickChart: 'corechart',
            ComboChart: 'corechart',
            TreeMap: 'treemap'
        };
        this.googleScriptLoadingNotifier = new _angular_core.EventEmitter();
        this.isScriptLoading = false;
    }
    /**
     * @param {?} chartName
     * @return {?}
     */
    MapLoaderService.prototype.loadCharts = function (chartName) {
        var _this = this;
        return new rxjs_Observable.Observable(function (observer) {
            _this.loadScript().subscribe(function (val) { return console.log(); }, function (error) { return console.error(error); }, function () {
                _this.loadRequiredChart(observer, chartName);
            });
        });
    };
    /**
     * @return {?}
     */
    MapLoaderService.prototype.loadScript = function () {
        var _this = this;
        return new rxjs_Observable.Observable(function (observer) {
            if (!_this.isScriptLoading) {
                //check if previously its loaded
                if (typeof google !== 'undefined' && google.charts) {
                    //check if chart package has been loaded using chartPackagename ?
                    _this.loadBaseChart(observer);
                }
                else {
                    _this.isScriptLoading = true;
                    var /** @type {?} */ script = document.createElement('script');
                    script.type = 'text/javascript';
                    script.src = 'https://www.gstatic.com/charts/loader.js';
                    script.async = true;
                    script.defer = true;
                    script.onload = function () {
                        _this.isScriptLoading = false;
                        _this.googleScriptLoadingNotifier.emit(true);
                        _this.loadBaseChart(observer);
                    };
                    script.onerror = function () {
                        observer.error('Could Not Load google Script');
                    };
                    document.getElementsByTagName('head')[0].appendChild(script);
                }
            }
            else {
                _this.googleScriptLoadingNotifier.subscribe(function (loaded) {
                    if (loaded) {
                        _this.loadBaseChart(observer);
                    }
                });
            }
        });
    };
    /**
     * Load Base Chart
     * @param {?} observer
     * @return {?}
     */
    MapLoaderService.prototype.loadBaseChart = function (observer) {
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(function () {
            observer.complete();
        });
    };
    /**
     * Load the required charts
     * @param {?} observer
     * @param {?} chartName
     * @return {?}
     */
    MapLoaderService.prototype.loadRequiredChart = function (observer, chartName) {
        if (google.visualization.hasOwnProperty(chartName)) {
            observer.complete();
        }
        else {
            google.charts.load('current', { 'packages': [this.chartPackage[chartName]] });
            google.charts.setOnLoadCallback(function () {
                observer.complete();
            });
        }
    };
MapLoaderService.ɵfac = function MapLoaderService_Factory(t) { return new (t || MapLoaderService)(); };
MapLoaderService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: MapLoaderService, factory: function (t) { return MapLoaderService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapLoaderService, [{
        type: _angular_core.Injectable
    }], function () { return []; }, null); })();
    return MapLoaderService;
}());
/**
 * @nocollapse
 */
MapLoaderService.ctorParameters = function () { return []; };

/**
 * Created by sagar on 10/8/17.
 */
var GeoChartComponent = (function () {
    /**
     * @param {?} loader
     */
    function GeoChartComponent(loader) {
        this.loader = loader;
        this.displayCountryName = false;
        this.id = 'amexio-map-geo-chart' + Math.floor(Math.random() * 90000) + 10000;
        this.width = '100%';
    }
    /**
     * @return {?}
     */
    GeoChartComponent.prototype.drawChart = function () {
        this.geomapData = google.visualization.arrayToDataTable(this.data);
        this.options = {
            displayMode: this.displayCountryName ? 'text' : null,
            region: this.regionCode ? this.regionCode : null,
            backgroundColor: this.backgroundColor ? this.backgroundColor : null,
            datalessRegionColor: this.datalessRegionColor ? this.datalessRegionColor : null,
            chartArea: this.chartAreaComponent ? {
                backgroundColor: this.chartAreaComponent.chartBackgroundColor ? this.chartAreaComponent.chartBackgroundColor : null,
                left: this.chartAreaComponent.leftPosition ? this.chartAreaComponent.leftPosition : null,
                top: this.chartAreaComponent.topPosition ? this.chartAreaComponent.topPosition : null,
                height: this.chartAreaComponent.chartHeightInper ? this.chartAreaComponent.chartHeightInper : null,
                width: this.chartAreaComponent.chartWidthInPer ? this.chartAreaComponent.chartWidthInPer : null
            } : null,
        };
        this.chart = new google.visualization.GeoChart(document.getElementById(this.id));
        this.hasLoaded = true;
        this.chart.draw(this.geomapData, this.options);
        google.visualization.events.addListener(this.chart, 'click', this.click);
    };
    /**
     * @param {?} e
     * @return {?}
     */
    GeoChartComponent.prototype.click = function (e) {
    };
    /**
     * @return {?}
     */
    GeoChartComponent.prototype.ngAfterContentInit = function () {
        this.chartAreaArray = this.chartAreaComp.toArray();
        if (this.chartAreaArray.length == 1) {
            this.chartAreaComponent = this.chartAreaArray.pop();
        }
    };
    /**
     * @return {?}
     */
    GeoChartComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.hasLoaded = false;
        this.loader.loadCharts('GeoChart').subscribe(function (value) { return console.log(); }, function (errror) { return console.error(errror); }, function () {
            _this.drawChart();
        });
    };
GeoChartComponent.ɵfac = function GeoChartComponent_Factory(t) { return new (t || GeoChartComponent)(ɵngcc0.ɵɵdirectiveInject(MapLoaderService)); };
GeoChartComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: GeoChartComponent, selectors: [["amexio-map-geo-chart"]], contentQueries: function GeoChartComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, MapProperties, false);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.chartAreaComp = _t);
    } }, inputs: { displayCountryName: "displayCountryName", width: "width", height: "height", data: "data", regionCode: "regionCode", backgroundColor: "backgroundColor", datalessRegionColor: "datalessRegionColor" }, decls: 2, vars: 6, consts: [["class", "lmask", 4, "ngIf"], [1, "lmask"]], template: function GeoChartComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div");
        ɵngcc0.ɵɵtemplate(1, GeoChartComponent_div_1_Template, 1, 0, "div", 0);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵstyleProp("width", ctx.width)("height", ctx.height);
        ɵngcc0.ɵɵattribute("id", ctx.id);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.hasLoaded);
    } }, directives: [ɵngcc1.NgIf], styles: [_c0] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GeoChartComponent, [{
        type: _angular_core.Component,
        args: [{
                selector: 'amexio-map-geo-chart',
                template: "\n      <div [attr.id]=\"id\"\n           [style.width]=\"width\"\n           [style.height]=\"height\"\n      >\n        <div *ngIf=\"!hasLoaded\" class=\"lmask\">\n        </div>\n      </div>\n  ",
                styles: [".lmask {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    background-color: #000;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    top: 0;\n    z-index: 9999;\n    opacity: 0.4;\n  }\n  .lmask.fixed {\n    position: fixed;\n  }\n  .lmask:before {\n    content: '';\n    background-color: transparent;\n    border: 5px solid rgba(0, 183, 229, 0.9);\n    opacity: .9;\n    border-right: 5px solid transparent;\n    border-left: 5px solid transparent;\n    border-radius: 50px;\n    box-shadow: 0 0 35px #2187e7;\n    width: 50px;\n    height: 50px;\n    -moz-animation: spinPulse 1s infinite ease-in-out;\n    -webkit-animation: spinPulse 1s infinite linear;\n    margin: -25px 0 0 -25px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n  }\n  .lmask:after {\n    content: '';\n    background-color: transparent;\n    border: 5px solid rgba(0, 183, 229, 0.9);\n    opacity: .9;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-radius: 50px;\n    box-shadow: 0 0 15px #2187e7;\n    width: 30px;\n    height: 30px;\n    -moz-animation: spinoffPulse 1s infinite linear;\n    -webkit-animation: spinoffPulse 1s infinite linear;\n    margin: -15px 0 0 -15px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n  }\n\n  @-moz-keyframes spinPulse {\n    0% {\n      -moz-transform: rotate(160deg);\n      opacity: 0;\n      box-shadow: 0 0 1px #2187e7;\n    }\n    50% {\n      -moz-transform: rotate(145deg);\n      opacity: 1;\n    }\n    100% {\n      -moz-transform: rotate(-320deg);\n      opacity: 0;\n    }\n  }\n  @-moz-keyframes spinoffPulse {\n    0% {\n      -moz-transform: rotate(0deg);\n    }\n    100% {\n      -moz-transform: rotate(360deg);\n    }\n  }\n  @-webkit-keyframes spinPulse {\n    0% {\n      -webkit-transform: rotate(160deg);\n      opacity: 0;\n      box-shadow: 0 0 1px #2187e7;\n    }\n    50% {\n      -webkit-transform: rotate(145deg);\n      opacity: 1;\n    }\n    100% {\n      -webkit-transform: rotate(-320deg);\n      opacity: 0;\n    }\n  }\n  @-webkit-keyframes spinoffPulse {\n    0% {\n      -webkit-transform: rotate(0deg);\n    }\n    100% {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n\n  "]
            }]
    }], function () { return [{ type: MapLoaderService }]; }, { displayCountryName: [{
            type: _angular_core.Input
        }], width: [{
            type: _angular_core.Input
        }], height: [{
            type: _angular_core.Input
        }], data: [{
            type: _angular_core.Input
        }], regionCode: [{
            type: _angular_core.Input
        }], backgroundColor: [{
            type: _angular_core.Input
        }], datalessRegionColor: [{
            type: _angular_core.Input
        }], chartAreaComp: [{
            type: _angular_core.ContentChildren,
            args: [MapProperties]
        }] }); })();
    return GeoChartComponent;
}());
/**
 * @nocollapse
 */
GeoChartComponent.ctorParameters = function () { return [
    { type: MapLoaderService, },
]; };
GeoChartComponent.propDecorators = {
    'width': [{ type: _angular_core.Input },],
    'height': [{ type: _angular_core.Input },],
    'data': [{ type: _angular_core.Input },],
    'displayCountryName': [{ type: _angular_core.Input },],
    'regionCode': [{ type: _angular_core.Input },],
    'backgroundColor': [{ type: _angular_core.Input },],
    'datalessRegionColor': [{ type: _angular_core.Input },],
    'chartAreaComp': [{ type: _angular_core.ContentChildren, args: [MapProperties,] },],
};

/*
 * Copyright 2016-2017 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Author - Sagar Jadhav
 *
 */
var MapTitleComponent = (function () {
    function MapTitleComponent() {
    }
    /**
     * @return {?}
     */
    MapTitleComponent.prototype.ngOnInit = function () {
    };
MapTitleComponent.ɵfac = function MapTitleComponent_Factory(t) { return new (t || MapTitleComponent)(); };
MapTitleComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MapTitleComponent, selectors: [["amexio-map-title"]], inputs: { title: "title", titlePosition: "titlePosition", titleColor: "titleColor", titleFontName: "titleFontName", titleFontSize: "titleFontSize", isTitleBold: "isTitleBold", isTitleItalic: "isTitleItalic" }, decls: 0, vars: 0, template: function MapTitleComponent_Template(rf, ctx) { }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapTitleComponent, [{
        type: _angular_core.Component,
        args: [{
                selector: 'amexio-map-title',
                template: " "
            }]
    }], function () { return []; }, { title: [{
            type: _angular_core.Input
        }], titlePosition: [{
            type: _angular_core.Input
        }], titleColor: [{
            type: _angular_core.Input
        }], titleFontName: [{
            type: _angular_core.Input
        }], titleFontSize: [{
            type: _angular_core.Input
        }], isTitleBold: [{
            type: _angular_core.Input
        }], isTitleItalic: [{
            type: _angular_core.Input
        }] }); })();
    return MapTitleComponent;
}());
/**
 * @nocollapse
 */
MapTitleComponent.ctorParameters = function () { return []; };
MapTitleComponent.propDecorators = {
    'title': [{ type: _angular_core.Input },],
    'titlePosition': [{ type: _angular_core.Input },],
    'titleColor': [{ type: _angular_core.Input },],
    'titleFontName': [{ type: _angular_core.Input },],
    'titleFontSize': [{ type: _angular_core.Input },],
    'isTitleBold': [{ type: _angular_core.Input },],
    'isTitleItalic': [{ type: _angular_core.Input },],
};

/**
 * Created by sagar on 18/8/17.
 */
var TreeMapComponent = (function () {
    /**
     * @param {?} loader
     */
    function TreeMapComponent(loader) {
        this.loader = loader;
        this.id = 'amexio-map-treemap' + Math.floor(Math.random() * 90000) + 10000;
        this.width = '100%';
    }
    /**
     * @return {?}
     */
    TreeMapComponent.prototype.drawChart = function () {
        this.treemapData = google.visualization.arrayToDataTable(this.data);
        this.options = {
            title: this.mapTitleComponent ? this.mapTitleComponent.title : null,
            titleTextStyle: this.mapTitleComponent ? {
                color: this.mapTitleComponent.titleColor ? this.mapTitleComponent.titleColor : null,
                fontName: this.mapTitleComponent.titleFontName ? this.mapTitleComponent.titleFontName : null,
                fontSize: this.mapTitleComponent.titleFontSize ? this.mapTitleComponent.titleFontSize : null,
                bold: this.mapTitleComponent.isTitleBold ? this.mapTitleComponent.isTitleBold : null,
                italic: this.mapTitleComponent.isTitleItalic ? this.mapTitleComponent.isTitleItalic : null
            } : null,
            minColor: this.minColor ? this.minColor : null,
            midColor: this.midColor ? this.midColor : null,
            maxColor: this.maxColor ? this.maxColor : null,
            headerHeight: 15,
            fontColor: 'black',
            showScale: this.showScale ? this.showScale : false,
            maxPostDepth: this.maxPostDepth ? this.maxPostDepth : 1
        };
        this.chart = new google.visualization.TreeMap(document.getElementById(this.id));
        this.hasLoaded = true;
        this.chart.draw(this.treemapData, this.options);
        google.visualization.events.addListener(this.chart, 'click', this.click);
    };
    /**
     * @param {?} e
     * @return {?}
     */
    TreeMapComponent.prototype.click = function (e) {
    };
    /**
     * @return {?}
     */
    TreeMapComponent.prototype.ngAfterContentInit = function () {
        this.mapTitleArray = this.maptleComp.toArray();
        if (this.mapTitleArray.length == 1) {
            this.mapTitleComponent = this.mapTitleArray.pop();
        }
    };
    /**
     * @return {?}
     */
    TreeMapComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.hasLoaded = false;
        this.loader.loadCharts('TreeMap').subscribe(function (value) { return console.log(); }, function (errror) { return console.error(errror); }, function () {
            _this.drawChart();
        });
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeMapComponent.prototype.onResize = function (event) {
        this.drawChart();
    };
TreeMapComponent.ɵfac = function TreeMapComponent_Factory(t) { return new (t || TreeMapComponent)(ɵngcc0.ɵɵdirectiveInject(MapLoaderService)); };
TreeMapComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TreeMapComponent, selectors: [["amexio-map-treemap"]], contentQueries: function TreeMapComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, MapTitleComponent, false);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.maptleComp = _t);
    } }, inputs: { width: "width", height: "height", data: "data", minColor: "minColor", midColor: "midColor", maxColor: "maxColor", showScale: "showScale", maxPostDepth: "maxPostDepth" }, decls: 2, vars: 6, consts: [[3, "resize"], ["class", "lmask", 4, "ngIf"], [1, "lmask"]], template: function TreeMapComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵlistener("resize", function TreeMapComponent_Template_div_resize_0_listener($event) { return ctx.onResize($event); }, false, ɵngcc0.ɵɵresolveWindow);
        ɵngcc0.ɵɵtemplate(1, TreeMapComponent_div_1_Template, 1, 0, "div", 1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵstyleProp("width", ctx.width)("height", ctx.height);
        ɵngcc0.ɵɵattribute("id", ctx.id);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.hasLoaded);
    } }, directives: [ɵngcc1.NgIf], styles: [_c0] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TreeMapComponent, [{
        type: _angular_core.Component,
        args: [{
                selector: 'amexio-map-treemap',
                template: "\n    <div [attr.id]=\"id\"\n         [style.width]=\"width\"\n         [style.height]=\"height\" (window:resize)=\"onResize($event)\"\n    > <div *ngIf=\"!hasLoaded\" class=\"lmask\">\n    </div>\n    </div>\n  ",
                styles: [".lmask {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    background-color: #000;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    top: 0;\n    z-index: 9999;\n    opacity: 0.4;\n  }\n  .lmask.fixed {\n    position: fixed;\n  }\n  .lmask:before {\n    content: '';\n    background-color: transparent;\n    border: 5px solid rgba(0, 183, 229, 0.9);\n    opacity: .9;\n    border-right: 5px solid transparent;\n    border-left: 5px solid transparent;\n    border-radius: 50px;\n    box-shadow: 0 0 35px #2187e7;\n    width: 50px;\n    height: 50px;\n    -moz-animation: spinPulse 1s infinite ease-in-out;\n    -webkit-animation: spinPulse 1s infinite linear;\n    margin: -25px 0 0 -25px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n  }\n  .lmask:after {\n    content: '';\n    background-color: transparent;\n    border: 5px solid rgba(0, 183, 229, 0.9);\n    opacity: .9;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-radius: 50px;\n    box-shadow: 0 0 15px #2187e7;\n    width: 30px;\n    height: 30px;\n    -moz-animation: spinoffPulse 1s infinite linear;\n    -webkit-animation: spinoffPulse 1s infinite linear;\n    margin: -15px 0 0 -15px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n  }\n\n  @-moz-keyframes spinPulse {\n    0% {\n      -moz-transform: rotate(160deg);\n      opacity: 0;\n      box-shadow: 0 0 1px #2187e7;\n    }\n    50% {\n      -moz-transform: rotate(145deg);\n      opacity: 1;\n    }\n    100% {\n      -moz-transform: rotate(-320deg);\n      opacity: 0;\n    }\n  }\n  @-moz-keyframes spinoffPulse {\n    0% {\n      -moz-transform: rotate(0deg);\n    }\n    100% {\n      -moz-transform: rotate(360deg);\n    }\n  }\n  @-webkit-keyframes spinPulse {\n    0% {\n      -webkit-transform: rotate(160deg);\n      opacity: 0;\n      box-shadow: 0 0 1px #2187e7;\n    }\n    50% {\n      -webkit-transform: rotate(145deg);\n      opacity: 1;\n    }\n    100% {\n      -webkit-transform: rotate(-320deg);\n      opacity: 0;\n    }\n  }\n  @-webkit-keyframes spinoffPulse {\n    0% {\n      -webkit-transform: rotate(0deg);\n    }\n    100% {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n\n  "]
            }]
    }], function () { return [{ type: MapLoaderService }]; }, { width: [{
            type: _angular_core.Input
        }], height: [{
            type: _angular_core.Input
        }], data: [{
            type: _angular_core.Input
        }], minColor: [{
            type: _angular_core.Input
        }], midColor: [{
            type: _angular_core.Input
        }], maxColor: [{
            type: _angular_core.Input
        }], showScale: [{
            type: _angular_core.Input
        }], maxPostDepth: [{
            type: _angular_core.Input
        }], maptleComp: [{
            type: _angular_core.ContentChildren,
            args: [MapTitleComponent]
        }] }); })();
    return TreeMapComponent;
}());
/**
 * @nocollapse
 */
TreeMapComponent.ctorParameters = function () { return [
    { type: MapLoaderService, },
]; };
TreeMapComponent.propDecorators = {
    'width': [{ type: _angular_core.Input },],
    'height': [{ type: _angular_core.Input },],
    'data': [{ type: _angular_core.Input },],
    'minColor': [{ type: _angular_core.Input },],
    'midColor': [{ type: _angular_core.Input },],
    'maxColor': [{ type: _angular_core.Input },],
    'showScale': [{ type: _angular_core.Input },],
    'maxPostDepth': [{ type: _angular_core.Input },],
    'maptleComp': [{ type: _angular_core.ContentChildren, args: [MapTitleComponent,] },],
};

var AmexioMapsModule = (function () {
    function AmexioMapsModule() {
    }
    /**
     * @return {?}
     */
    AmexioMapsModule.forRoot = function () {
        return {
            ngModule: AmexioMapsModule,
            providers: [MapLoaderService]
        };
    };
AmexioMapsModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AmexioMapsModule });
AmexioMapsModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AmexioMapsModule_Factory(t) { return new (t || AmexioMapsModule)(); }, providers: [MapLoaderService], imports: [[
            _angular_common.CommonModule
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(AmexioMapsModule, { declarations: [MapProperties, GeoChartComponent, TreeMapComponent, MapTitleComponent], imports: [ɵngcc1.CommonModule], exports: [MapProperties, GeoChartComponent, TreeMapComponent, MapTitleComponent] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AmexioMapsModule, [{
        type: _angular_core.NgModule,
        args: [{
                imports: [
                    _angular_common.CommonModule
                ],
                declarations: [
                    MapProperties,
                    GeoChartComponent,
                    TreeMapComponent,
                    MapTitleComponent
                ],
                exports: [
                    MapProperties,
                    GeoChartComponent,
                    TreeMapComponent,
                    MapTitleComponent
                ],
                providers: [MapLoaderService]
            }]
    }], function () { return []; }, null); })();
    return AmexioMapsModule;
}());
/**
 * @nocollapse
 */
AmexioMapsModule.ctorParameters = function () { return []; };

exports.AmexioMapsModule = AmexioMapsModule;
exports.MapProperties = MapProperties;
exports.GeoChartComponent = GeoChartComponent;
exports.TreeMapComponent = TreeMapComponent;
exports.MapTitleComponent = MapTitleComponent;
exports.MapLoaderService = MapLoaderService;

Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFwcy51bWQuanMiLCJzb3VyY2VzIjpbIm1hcHMudW1kLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsNEhBQXdFO0FBQ3hFLHdGQUFzRDtBQUN0RCwwQ0FBVTtBQUNWLGlDQUFtQjs7Ozs7Ozs7QUFBeUQ7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFNO0FBQ047QUFDQSxLQU1FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O2dEQUFNO0FBQ047QUFDQSxLQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBTTtBQUNOO0FBQ0EsS0FPRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBTTtBQUNOO0FBQ0EsS0FNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBTTtBQUNOO0FBQ0EsS0FPRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0RBQU07QUFDTjtBQUNBLEtBb0JFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzLCByZXF1aXJlKCdAYW5ndWxhci9jb3JlJyksIHJlcXVpcmUoJ0Bhbmd1bGFyL2NvbW1vbicpLCByZXF1aXJlKCdyeGpzL09ic2VydmFibGUnKSkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJywgJ0Bhbmd1bGFyL2NvcmUnLCAnQGFuZ3VsYXIvY29tbW9uJywgJ3J4anMvT2JzZXJ2YWJsZSddLCBmYWN0b3J5KSA6XG5cdChmYWN0b3J5KChnbG9iYWwubWFwcyA9IHt9KSxnbG9iYWwuX2FuZ3VsYXJfY29yZSxnbG9iYWwuX2FuZ3VsYXJfY29tbW9uLGdsb2JhbC5yeGpzX09ic2VydmFibGUpKTtcbn0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzLF9hbmd1bGFyX2NvcmUsX2FuZ3VsYXJfY29tbW9uLHJ4anNfT2JzZXJ2YWJsZSkgeyAndXNlIHN0cmljdCc7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAxNi0yMDE3IHRoZSBvcmlnaW5hbCBhdXRob3Igb3IgYXV0aG9ycy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogQXV0aG9yIC0gU2FnYXIgSmFkaGF2XG4gKlxuICovXG52YXIgTWFwUHJvcGVydGllcyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFwUHJvcGVydGllcygpIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBNYXBQcm9wZXJ0aWVzLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB9O1xuICAgIHJldHVybiBNYXBQcm9wZXJ0aWVzO1xufSgpKTtcbk1hcFByb3BlcnRpZXMuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IF9hbmd1bGFyX2NvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnYW1leGlvLW1hcC1wcm9wZXJ0aWVzJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJcIlxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqXG4gKiBAbm9jb2xsYXBzZVxuICovXG5NYXBQcm9wZXJ0aWVzLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XG5NYXBQcm9wZXJ0aWVzLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICdjaGFydEJhY2tncm91bmRDb2xvcic6IFt7IHR5cGU6IF9hbmd1bGFyX2NvcmUuSW5wdXQgfSxdLFxuICAgICdsZWZ0UG9zaXRpb24nOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbiAgICAndG9wUG9zaXRpb24nOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbiAgICAnY2hhcnRXaWR0aEluUGVyJzogW3sgdHlwZTogX2FuZ3VsYXJfY29yZS5JbnB1dCB9LF0sXG4gICAgJ2NoYXJ0SGVpZ2h0SW5wZXInOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbn07XG5cbi8qKlxuICogQ3JlYXRlZCBieSBwcmF0aWsgb24gMTcvOC8xNy5cbiAqL1xudmFyIE1hcExvYWRlclNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hcExvYWRlclNlcnZpY2UoKSB7XG4gICAgICAgIHRoaXMuY2hhcnRQYWNrYWdlID0ge1xuICAgICAgICAgICAgQXJlYUNoYXJ0OiAnY29yZWNoYXJ0JyxcbiAgICAgICAgICAgIEJhcjogJ2JhcicsXG4gICAgICAgICAgICBCYXJDaGFydDogJ2NvcmVjaGFydCcsXG4gICAgICAgICAgICBDb2x1bW5DaGFydDogJ2NvcmVjaGFydCcsXG4gICAgICAgICAgICBQaWVDaGFydDogJ2NvcmVjaGFydCcsXG4gICAgICAgICAgICBHYW50dDogJ2dhbnR0JyxcbiAgICAgICAgICAgIEdhdWdlOiAnZ2F1Z2UnLFxuICAgICAgICAgICAgR2VvQ2hhcnQ6ICdnZW9jaGFydCcsXG4gICAgICAgICAgICBIaXN0b2dyYW06ICdjb3JlY2hhcnQnLFxuICAgICAgICAgICAgTGluZTogJ2xpbmUnLFxuICAgICAgICAgICAgTGluZUNoYXJ0OiAnY29yZWNoYXJ0JyxcbiAgICAgICAgICAgIE1hcDogJ21hcCcsXG4gICAgICAgICAgICBUaW1lbGluZTogJ3RpbWVsaW5lJyxcbiAgICAgICAgICAgIEJ1YmJsZUNoYXJ0OiAnY29yZWNoYXJ0JyxcbiAgICAgICAgICAgIENhbmRsZXN0aWNrQ2hhcnQ6ICdjb3JlY2hhcnQnLFxuICAgICAgICAgICAgQ29tYm9DaGFydDogJ2NvcmVjaGFydCcsXG4gICAgICAgICAgICBUcmVlTWFwOiAndHJlZW1hcCdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nb29nbGVTY3JpcHRMb2FkaW5nTm90aWZpZXIgPSBuZXcgX2FuZ3VsYXJfY29yZS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5pc1NjcmlwdExvYWRpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBjaGFydE5hbWVcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIE1hcExvYWRlclNlcnZpY2UucHJvdG90eXBlLmxvYWRDaGFydHMgPSBmdW5jdGlvbiAoY2hhcnROYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBuZXcgcnhqc19PYnNlcnZhYmxlLk9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2FkU2NyaXB0KCkuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIGNvbnNvbGUubG9nKCk7IH0sIGZ1bmN0aW9uIChlcnJvcikgeyByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7IH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkUmVxdWlyZWRDaGFydChvYnNlcnZlciwgY2hhcnROYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgTWFwTG9hZGVyU2VydmljZS5wcm90b3R5cGUubG9hZFNjcmlwdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyByeGpzX09ic2VydmFibGUuT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMuaXNTY3JpcHRMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgLy9jaGVjayBpZiBwcmV2aW91c2x5IGl0cyBsb2FkZWRcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGdvb2dsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgZ29vZ2xlLmNoYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAvL2NoZWNrIGlmIGNoYXJ0IHBhY2thZ2UgaGFzIGJlZW4gbG9hZGVkIHVzaW5nIGNoYXJ0UGFja2FnZW5hbWUgP1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkQmFzZUNoYXJ0KG9ic2VydmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmlzU2NyaXB0TG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciAvKiogQHR5cGUgez99ICovIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHQuc3JjID0gJ2h0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2NoYXJ0cy9sb2FkZXIuanMnO1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHQuZGVmZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNTY3JpcHRMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5nb29nbGVTY3JpcHRMb2FkaW5nTm90aWZpZXIuZW1pdCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRCYXNlQ2hhcnQob2JzZXJ2ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKCdDb3VsZCBOb3QgTG9hZCBnb29nbGUgU2NyaXB0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5nb29nbGVTY3JpcHRMb2FkaW5nTm90aWZpZXIuc3Vic2NyaWJlKGZ1bmN0aW9uIChsb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZEJhc2VDaGFydChvYnNlcnZlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIEJhc2UgQ2hhcnRcbiAgICAgKiBAcGFyYW0gez99IG9ic2VydmVyXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBNYXBMb2FkZXJTZXJ2aWNlLnByb3RvdHlwZS5sb2FkQmFzZUNoYXJ0ID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIGdvb2dsZS5jaGFydHMubG9hZCgnY3VycmVudCcsIHsgJ3BhY2thZ2VzJzogWydjb3JlY2hhcnQnXSB9KTtcbiAgICAgICAgZ29vZ2xlLmNoYXJ0cy5zZXRPbkxvYWRDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIHJlcXVpcmVkIGNoYXJ0c1xuICAgICAqIEBwYXJhbSB7P30gb2JzZXJ2ZXJcbiAgICAgKiBAcGFyYW0gez99IGNoYXJ0TmFtZVxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgTWFwTG9hZGVyU2VydmljZS5wcm90b3R5cGUubG9hZFJlcXVpcmVkQ2hhcnQgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIGNoYXJ0TmFtZSkge1xuICAgICAgICBpZiAoZ29vZ2xlLnZpc3VhbGl6YXRpb24uaGFzT3duUHJvcGVydHkoY2hhcnROYW1lKSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGdvb2dsZS5jaGFydHMubG9hZCgnY3VycmVudCcsIHsgJ3BhY2thZ2VzJzogW3RoaXMuY2hhcnRQYWNrYWdlW2NoYXJ0TmFtZV1dIH0pO1xuICAgICAgICAgICAgZ29vZ2xlLmNoYXJ0cy5zZXRPbkxvYWRDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWFwTG9hZGVyU2VydmljZTtcbn0oKSk7XG5NYXBMb2FkZXJTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBfYW5ndWxhcl9jb3JlLkluamVjdGFibGUgfSxcbl07XG4vKipcbiAqIEBub2NvbGxhcHNlXG4gKi9cbk1hcExvYWRlclNlcnZpY2UuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfTtcblxuLyoqXG4gKiBDcmVhdGVkIGJ5IHNhZ2FyIG9uIDEwLzgvMTcuXG4gKi9cbnZhciBHZW9DaGFydENvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBsb2FkZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBHZW9DaGFydENvbXBvbmVudChsb2FkZXIpIHtcbiAgICAgICAgdGhpcy5sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZGlzcGxheUNvdW50cnlOYW1lID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaWQgPSAnYW1leGlvLW1hcC1nZW8tY2hhcnQnICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTAwMDApICsgMTAwMDA7XG4gICAgICAgIHRoaXMud2lkdGggPSAnMTAwJSc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgR2VvQ2hhcnRDb21wb25lbnQucHJvdG90eXBlLmRyYXdDaGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5nZW9tYXBEYXRhID0gZ29vZ2xlLnZpc3VhbGl6YXRpb24uYXJyYXlUb0RhdGFUYWJsZSh0aGlzLmRhdGEpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBkaXNwbGF5TW9kZTogdGhpcy5kaXNwbGF5Q291bnRyeU5hbWUgPyAndGV4dCcgOiBudWxsLFxuICAgICAgICAgICAgcmVnaW9uOiB0aGlzLnJlZ2lvbkNvZGUgPyB0aGlzLnJlZ2lvbkNvZGUgOiBudWxsLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLmJhY2tncm91bmRDb2xvciA/IHRoaXMuYmFja2dyb3VuZENvbG9yIDogbnVsbCxcbiAgICAgICAgICAgIGRhdGFsZXNzUmVnaW9uQ29sb3I6IHRoaXMuZGF0YWxlc3NSZWdpb25Db2xvciA/IHRoaXMuZGF0YWxlc3NSZWdpb25Db2xvciA6IG51bGwsXG4gICAgICAgICAgICBjaGFydEFyZWE6IHRoaXMuY2hhcnRBcmVhQ29tcG9uZW50ID8ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5jaGFydEFyZWFDb21wb25lbnQuY2hhcnRCYWNrZ3JvdW5kQ29sb3IgPyB0aGlzLmNoYXJ0QXJlYUNvbXBvbmVudC5jaGFydEJhY2tncm91bmRDb2xvciA6IG51bGwsXG4gICAgICAgICAgICAgICAgbGVmdDogdGhpcy5jaGFydEFyZWFDb21wb25lbnQubGVmdFBvc2l0aW9uID8gdGhpcy5jaGFydEFyZWFDb21wb25lbnQubGVmdFBvc2l0aW9uIDogbnVsbCxcbiAgICAgICAgICAgICAgICB0b3A6IHRoaXMuY2hhcnRBcmVhQ29tcG9uZW50LnRvcFBvc2l0aW9uID8gdGhpcy5jaGFydEFyZWFDb21wb25lbnQudG9wUG9zaXRpb24gOiBudWxsLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5jaGFydEFyZWFDb21wb25lbnQuY2hhcnRIZWlnaHRJbnBlciA/IHRoaXMuY2hhcnRBcmVhQ29tcG9uZW50LmNoYXJ0SGVpZ2h0SW5wZXIgOiBudWxsLFxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmNoYXJ0QXJlYUNvbXBvbmVudC5jaGFydFdpZHRoSW5QZXIgPyB0aGlzLmNoYXJ0QXJlYUNvbXBvbmVudC5jaGFydFdpZHRoSW5QZXIgOiBudWxsXG4gICAgICAgICAgICB9IDogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGFydCA9IG5ldyBnb29nbGUudmlzdWFsaXphdGlvbi5HZW9DaGFydChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKSk7XG4gICAgICAgIHRoaXMuaGFzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jaGFydC5kcmF3KHRoaXMuZ2VvbWFwRGF0YSwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgZ29vZ2xlLnZpc3VhbGl6YXRpb24uZXZlbnRzLmFkZExpc3RlbmVyKHRoaXMuY2hhcnQsICdjbGljaycsIHRoaXMuY2xpY2spO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBlXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBHZW9DaGFydENvbXBvbmVudC5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBHZW9DaGFydENvbXBvbmVudC5wcm90b3R5cGUubmdBZnRlckNvbnRlbnRJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYXJ0QXJlYUFycmF5ID0gdGhpcy5jaGFydEFyZWFDb21wLnRvQXJyYXkoKTtcbiAgICAgICAgaWYgKHRoaXMuY2hhcnRBcmVhQXJyYXkubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnRBcmVhQ29tcG9uZW50ID0gdGhpcy5jaGFydEFyZWFBcnJheS5wb3AoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBHZW9DaGFydENvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuaGFzTG9hZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9hZGVyLmxvYWRDaGFydHMoJ0dlb0NoYXJ0Jykuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gY29uc29sZS5sb2coKTsgfSwgZnVuY3Rpb24gKGVycnJvcikgeyByZXR1cm4gY29uc29sZS5lcnJvcihlcnJyb3IpOyB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5kcmF3Q2hhcnQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gR2VvQ2hhcnRDb21wb25lbnQ7XG59KCkpO1xuR2VvQ2hhcnRDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IF9hbmd1bGFyX2NvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnYW1leGlvLW1hcC1nZW8tY2hhcnQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICAgIDxkaXYgW2F0dHIuaWRdPVxcXCJpZFxcXCJcXG4gICAgICAgICAgIFtzdHlsZS53aWR0aF09XFxcIndpZHRoXFxcIlxcbiAgICAgICAgICAgW3N0eWxlLmhlaWdodF09XFxcImhlaWdodFxcXCJcXG4gICAgICA+XFxuICAgICAgICA8ZGl2ICpuZ0lmPVxcXCIhaGFzTG9hZGVkXFxcIiBjbGFzcz1cXFwibG1hc2tcXFwiPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICBcIixcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIi5sbWFzayB7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgaGVpZ2h0OiAxMDAlO1xcbiAgICB3aWR0aDogMTAwJTtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcXG4gICAgYm90dG9tOiAwO1xcbiAgICBsZWZ0OiAwO1xcbiAgICByaWdodDogMDtcXG4gICAgdG9wOiAwO1xcbiAgICB6LWluZGV4OiA5OTk5O1xcbiAgICBvcGFjaXR5OiAwLjQ7XFxuICB9XFxuICAubG1hc2suZml4ZWQge1xcbiAgICBwb3NpdGlvbjogZml4ZWQ7XFxuICB9XFxuICAubG1hc2s6YmVmb3JlIHtcXG4gICAgY29udGVudDogJyc7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xcbiAgICBib3JkZXI6IDVweCBzb2xpZCByZ2JhKDAsIDE4MywgMjI5LCAwLjkpO1xcbiAgICBvcGFjaXR5OiAuOTtcXG4gICAgYm9yZGVyLXJpZ2h0OiA1cHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICAgIGJvcmRlci1sZWZ0OiA1cHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7XFxuICAgIGJveC1zaGFkb3c6IDAgMCAzNXB4ICMyMTg3ZTc7XFxuICAgIHdpZHRoOiA1MHB4O1xcbiAgICBoZWlnaHQ6IDUwcHg7XFxuICAgIC1tb3otYW5pbWF0aW9uOiBzcGluUHVsc2UgMXMgaW5maW5pdGUgZWFzZS1pbi1vdXQ7XFxuICAgIC13ZWJraXQtYW5pbWF0aW9uOiBzcGluUHVsc2UgMXMgaW5maW5pdGUgbGluZWFyO1xcbiAgICBtYXJnaW46IC0yNXB4IDAgMCAtMjVweDtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0b3A6IDUwJTtcXG4gICAgbGVmdDogNTAlO1xcbiAgfVxcbiAgLmxtYXNrOmFmdGVyIHtcXG4gICAgY29udGVudDogJyc7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xcbiAgICBib3JkZXI6IDVweCBzb2xpZCByZ2JhKDAsIDE4MywgMjI5LCAwLjkpO1xcbiAgICBvcGFjaXR5OiAuOTtcXG4gICAgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCB0cmFuc3BhcmVudDtcXG4gICAgYm9yZGVyLXJpZ2h0OiA1cHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7XFxuICAgIGJveC1zaGFkb3c6IDAgMCAxNXB4ICMyMTg3ZTc7XFxuICAgIHdpZHRoOiAzMHB4O1xcbiAgICBoZWlnaHQ6IDMwcHg7XFxuICAgIC1tb3otYW5pbWF0aW9uOiBzcGlub2ZmUHVsc2UgMXMgaW5maW5pdGUgbGluZWFyO1xcbiAgICAtd2Via2l0LWFuaW1hdGlvbjogc3Bpbm9mZlB1bHNlIDFzIGluZmluaXRlIGxpbmVhcjtcXG4gICAgbWFyZ2luOiAtMTVweCAwIDAgLTE1cHg7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgdG9wOiA1MCU7XFxuICAgIGxlZnQ6IDUwJTtcXG4gIH1cXG5cXG4gIEAtbW96LWtleWZyYW1lcyBzcGluUHVsc2Uge1xcbiAgICAwJSB7XFxuICAgICAgLW1vei10cmFuc2Zvcm06IHJvdGF0ZSgxNjBkZWcpO1xcbiAgICAgIG9wYWNpdHk6IDA7XFxuICAgICAgYm94LXNoYWRvdzogMCAwIDFweCAjMjE4N2U3O1xcbiAgICB9XFxuICAgIDUwJSB7XFxuICAgICAgLW1vei10cmFuc2Zvcm06IHJvdGF0ZSgxNDVkZWcpO1xcbiAgICAgIG9wYWNpdHk6IDE7XFxuICAgIH1cXG4gICAgMTAwJSB7XFxuICAgICAgLW1vei10cmFuc2Zvcm06IHJvdGF0ZSgtMzIwZGVnKTtcXG4gICAgICBvcGFjaXR5OiAwO1xcbiAgICB9XFxuICB9XFxuICBALW1vei1rZXlmcmFtZXMgc3Bpbm9mZlB1bHNlIHtcXG4gICAgMCUge1xcbiAgICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XFxuICAgIH1cXG4gICAgMTAwJSB7XFxuICAgICAgLW1vei10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xcbiAgICB9XFxuICB9XFxuICBALXdlYmtpdC1rZXlmcmFtZXMgc3BpblB1bHNlIHtcXG4gICAgMCUge1xcbiAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMTYwZGVnKTtcXG4gICAgICBvcGFjaXR5OiAwO1xcbiAgICAgIGJveC1zaGFkb3c6IDAgMCAxcHggIzIxODdlNztcXG4gICAgfVxcbiAgICA1MCUge1xcbiAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMTQ1ZGVnKTtcXG4gICAgICBvcGFjaXR5OiAxO1xcbiAgICB9XFxuICAgIDEwMCUge1xcbiAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoLTMyMGRlZyk7XFxuICAgICAgb3BhY2l0eTogMDtcXG4gICAgfVxcbiAgfVxcbiAgQC13ZWJraXQta2V5ZnJhbWVzIHNwaW5vZmZQdWxzZSB7XFxuICAgIDAlIHtcXG4gICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xcbiAgICB9XFxuICAgIDEwMCUge1xcbiAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgXCJdXG4gICAgICAgICAgICB9LF0gfSxcbl07XG4vKipcbiAqIEBub2NvbGxhcHNlXG4gKi9cbkdlb0NoYXJ0Q29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgIHsgdHlwZTogTWFwTG9hZGVyU2VydmljZSwgfSxcbl07IH07XG5HZW9DaGFydENvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICAnd2lkdGgnOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbiAgICAnaGVpZ2h0JzogW3sgdHlwZTogX2FuZ3VsYXJfY29yZS5JbnB1dCB9LF0sXG4gICAgJ2RhdGEnOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbiAgICAnZGlzcGxheUNvdW50cnlOYW1lJzogW3sgdHlwZTogX2FuZ3VsYXJfY29yZS5JbnB1dCB9LF0sXG4gICAgJ3JlZ2lvbkNvZGUnOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbiAgICAnYmFja2dyb3VuZENvbG9yJzogW3sgdHlwZTogX2FuZ3VsYXJfY29yZS5JbnB1dCB9LF0sXG4gICAgJ2RhdGFsZXNzUmVnaW9uQ29sb3InOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbiAgICAnY2hhcnRBcmVhQ29tcCc6IFt7IHR5cGU6IF9hbmd1bGFyX2NvcmUuQ29udGVudENoaWxkcmVuLCBhcmdzOiBbTWFwUHJvcGVydGllcyxdIH0sXSxcbn07XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAxNi0yMDE3IHRoZSBvcmlnaW5hbCBhdXRob3Igb3IgYXV0aG9ycy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogQXV0aG9yIC0gU2FnYXIgSmFkaGF2XG4gKlxuICovXG52YXIgTWFwVGl0bGVDb21wb25lbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hcFRpdGxlQ29tcG9uZW50KCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIE1hcFRpdGxlQ29tcG9uZW50LnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB9O1xuICAgIHJldHVybiBNYXBUaXRsZUNvbXBvbmVudDtcbn0oKSk7XG5NYXBUaXRsZUNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogX2FuZ3VsYXJfY29yZS5Db21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdhbWV4aW8tbWFwLXRpdGxlJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCIgXCJcbiAgICAgICAgICAgIH0sXSB9LFxuXTtcbi8qKlxuICogQG5vY29sbGFwc2VcbiAqL1xuTWFwVGl0bGVDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfTtcbk1hcFRpdGxlQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgICd0aXRsZSc6IFt7IHR5cGU6IF9hbmd1bGFyX2NvcmUuSW5wdXQgfSxdLFxuICAgICd0aXRsZVBvc2l0aW9uJzogW3sgdHlwZTogX2FuZ3VsYXJfY29yZS5JbnB1dCB9LF0sXG4gICAgJ3RpdGxlQ29sb3InOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbiAgICAndGl0bGVGb250TmFtZSc6IFt7IHR5cGU6IF9hbmd1bGFyX2NvcmUuSW5wdXQgfSxdLFxuICAgICd0aXRsZUZvbnRTaXplJzogW3sgdHlwZTogX2FuZ3VsYXJfY29yZS5JbnB1dCB9LF0sXG4gICAgJ2lzVGl0bGVCb2xkJzogW3sgdHlwZTogX2FuZ3VsYXJfY29yZS5JbnB1dCB9LF0sXG4gICAgJ2lzVGl0bGVJdGFsaWMnOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbn07XG5cbi8qKlxuICogQ3JlYXRlZCBieSBzYWdhciBvbiAxOC84LzE3LlxuICovXG52YXIgVHJlZU1hcENvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBsb2FkZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmVlTWFwQ29tcG9uZW50KGxvYWRlcikge1xuICAgICAgICB0aGlzLmxvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgdGhpcy5pZCA9ICdhbWV4aW8tbWFwLXRyZWVtYXAnICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTAwMDApICsgMTAwMDA7XG4gICAgICAgIHRoaXMud2lkdGggPSAnMTAwJSc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgVHJlZU1hcENvbXBvbmVudC5wcm90b3R5cGUuZHJhd0NoYXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRyZWVtYXBEYXRhID0gZ29vZ2xlLnZpc3VhbGl6YXRpb24uYXJyYXlUb0RhdGFUYWJsZSh0aGlzLmRhdGEpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICB0aXRsZTogdGhpcy5tYXBUaXRsZUNvbXBvbmVudCA/IHRoaXMubWFwVGl0bGVDb21wb25lbnQudGl0bGUgOiBudWxsLFxuICAgICAgICAgICAgdGl0bGVUZXh0U3R5bGU6IHRoaXMubWFwVGl0bGVDb21wb25lbnQgPyB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMubWFwVGl0bGVDb21wb25lbnQudGl0bGVDb2xvciA/IHRoaXMubWFwVGl0bGVDb21wb25lbnQudGl0bGVDb2xvciA6IG51bGwsXG4gICAgICAgICAgICAgICAgZm9udE5hbWU6IHRoaXMubWFwVGl0bGVDb21wb25lbnQudGl0bGVGb250TmFtZSA/IHRoaXMubWFwVGl0bGVDb21wb25lbnQudGl0bGVGb250TmFtZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgZm9udFNpemU6IHRoaXMubWFwVGl0bGVDb21wb25lbnQudGl0bGVGb250U2l6ZSA/IHRoaXMubWFwVGl0bGVDb21wb25lbnQudGl0bGVGb250U2l6ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgYm9sZDogdGhpcy5tYXBUaXRsZUNvbXBvbmVudC5pc1RpdGxlQm9sZCA/IHRoaXMubWFwVGl0bGVDb21wb25lbnQuaXNUaXRsZUJvbGQgOiBudWxsLFxuICAgICAgICAgICAgICAgIGl0YWxpYzogdGhpcy5tYXBUaXRsZUNvbXBvbmVudC5pc1RpdGxlSXRhbGljID8gdGhpcy5tYXBUaXRsZUNvbXBvbmVudC5pc1RpdGxlSXRhbGljIDogbnVsbFxuICAgICAgICAgICAgfSA6IG51bGwsXG4gICAgICAgICAgICBtaW5Db2xvcjogdGhpcy5taW5Db2xvciA/IHRoaXMubWluQ29sb3IgOiBudWxsLFxuICAgICAgICAgICAgbWlkQ29sb3I6IHRoaXMubWlkQ29sb3IgPyB0aGlzLm1pZENvbG9yIDogbnVsbCxcbiAgICAgICAgICAgIG1heENvbG9yOiB0aGlzLm1heENvbG9yID8gdGhpcy5tYXhDb2xvciA6IG51bGwsXG4gICAgICAgICAgICBoZWFkZXJIZWlnaHQ6IDE1LFxuICAgICAgICAgICAgZm9udENvbG9yOiAnYmxhY2snLFxuICAgICAgICAgICAgc2hvd1NjYWxlOiB0aGlzLnNob3dTY2FsZSA/IHRoaXMuc2hvd1NjYWxlIDogZmFsc2UsXG4gICAgICAgICAgICBtYXhQb3N0RGVwdGg6IHRoaXMubWF4UG9zdERlcHRoID8gdGhpcy5tYXhQb3N0RGVwdGggOiAxXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hhcnQgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uVHJlZU1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKSk7XG4gICAgICAgIHRoaXMuaGFzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jaGFydC5kcmF3KHRoaXMudHJlZW1hcERhdGEsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIGdvb2dsZS52aXN1YWxpemF0aW9uLmV2ZW50cy5hZGRMaXN0ZW5lcih0aGlzLmNoYXJ0LCAnY2xpY2snLCB0aGlzLmNsaWNrKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gZVxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgVHJlZU1hcENvbXBvbmVudC5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBUcmVlTWFwQ29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyQ29udGVudEluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubWFwVGl0bGVBcnJheSA9IHRoaXMubWFwdGxlQ29tcC50b0FycmF5KCk7XG4gICAgICAgIGlmICh0aGlzLm1hcFRpdGxlQXJyYXkubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIHRoaXMubWFwVGl0bGVDb21wb25lbnQgPSB0aGlzLm1hcFRpdGxlQXJyYXkucG9wKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgVHJlZU1hcENvbXBvbmVudC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuaGFzTG9hZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9hZGVyLmxvYWRDaGFydHMoJ1RyZWVNYXAnKS5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBjb25zb2xlLmxvZygpOyB9LCBmdW5jdGlvbiAoZXJycm9yKSB7IHJldHVybiBjb25zb2xlLmVycm9yKGVycnJvcik7IH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmRyYXdDaGFydCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gZXZlbnRcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIFRyZWVNYXBDb21wb25lbnQucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZHJhd0NoYXJ0KCk7XG4gICAgfTtcbiAgICByZXR1cm4gVHJlZU1hcENvbXBvbmVudDtcbn0oKSk7XG5UcmVlTWFwQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBfYW5ndWxhcl9jb3JlLkNvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ2FtZXhpby1tYXAtdHJlZW1hcCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgIDxkaXYgW2F0dHIuaWRdPVxcXCJpZFxcXCJcXG4gICAgICAgICBbc3R5bGUud2lkdGhdPVxcXCJ3aWR0aFxcXCJcXG4gICAgICAgICBbc3R5bGUuaGVpZ2h0XT1cXFwiaGVpZ2h0XFxcIiAod2luZG93OnJlc2l6ZSk9XFxcIm9uUmVzaXplKCRldmVudClcXFwiXFxuICAgID4gPGRpdiAqbmdJZj1cXFwiIWhhc0xvYWRlZFxcXCIgY2xhc3M9XFxcImxtYXNrXFxcIj5cXG4gICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgXCIsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCIubG1hc2sge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGhlaWdodDogMTAwJTtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XFxuICAgIGJvdHRvbTogMDtcXG4gICAgbGVmdDogMDtcXG4gICAgcmlnaHQ6IDA7XFxuICAgIHRvcDogMDtcXG4gICAgei1pbmRleDogOTk5OTtcXG4gICAgb3BhY2l0eTogMC40O1xcbiAgfVxcbiAgLmxtYXNrLmZpeGVkIHtcXG4gICAgcG9zaXRpb246IGZpeGVkO1xcbiAgfVxcbiAgLmxtYXNrOmJlZm9yZSB7XFxuICAgIGNvbnRlbnQ6ICcnO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcXG4gICAgYm9yZGVyOiA1cHggc29saWQgcmdiYSgwLCAxODMsIDIyOSwgMC45KTtcXG4gICAgb3BhY2l0eTogLjk7XFxuICAgIGJvcmRlci1yaWdodDogNXB4IHNvbGlkIHRyYW5zcGFyZW50O1xcbiAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkIHRyYW5zcGFyZW50O1xcbiAgICBib3JkZXItcmFkaXVzOiA1MHB4O1xcbiAgICBib3gtc2hhZG93OiAwIDAgMzVweCAjMjE4N2U3O1xcbiAgICB3aWR0aDogNTBweDtcXG4gICAgaGVpZ2h0OiA1MHB4O1xcbiAgICAtbW96LWFuaW1hdGlvbjogc3BpblB1bHNlIDFzIGluZmluaXRlIGVhc2UtaW4tb3V0O1xcbiAgICAtd2Via2l0LWFuaW1hdGlvbjogc3BpblB1bHNlIDFzIGluZmluaXRlIGxpbmVhcjtcXG4gICAgbWFyZ2luOiAtMjVweCAwIDAgLTI1cHg7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgdG9wOiA1MCU7XFxuICAgIGxlZnQ6IDUwJTtcXG4gIH1cXG4gIC5sbWFzazphZnRlciB7XFxuICAgIGNvbnRlbnQ6ICcnO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcXG4gICAgYm9yZGVyOiA1cHggc29saWQgcmdiYSgwLCAxODMsIDIyOSwgMC45KTtcXG4gICAgb3BhY2l0eTogLjk7XFxuICAgIGJvcmRlci1sZWZ0OiA1cHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICAgIGJvcmRlci1yaWdodDogNXB4IHNvbGlkIHRyYW5zcGFyZW50O1xcbiAgICBib3JkZXItcmFkaXVzOiA1MHB4O1xcbiAgICBib3gtc2hhZG93OiAwIDAgMTVweCAjMjE4N2U3O1xcbiAgICB3aWR0aDogMzBweDtcXG4gICAgaGVpZ2h0OiAzMHB4O1xcbiAgICAtbW96LWFuaW1hdGlvbjogc3Bpbm9mZlB1bHNlIDFzIGluZmluaXRlIGxpbmVhcjtcXG4gICAgLXdlYmtpdC1hbmltYXRpb246IHNwaW5vZmZQdWxzZSAxcyBpbmZpbml0ZSBsaW5lYXI7XFxuICAgIG1hcmdpbjogLTE1cHggMCAwIC0xNXB4O1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHRvcDogNTAlO1xcbiAgICBsZWZ0OiA1MCU7XFxuICB9XFxuXFxuICBALW1vei1rZXlmcmFtZXMgc3BpblB1bHNlIHtcXG4gICAgMCUge1xcbiAgICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoMTYwZGVnKTtcXG4gICAgICBvcGFjaXR5OiAwO1xcbiAgICAgIGJveC1zaGFkb3c6IDAgMCAxcHggIzIxODdlNztcXG4gICAgfVxcbiAgICA1MCUge1xcbiAgICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoMTQ1ZGVnKTtcXG4gICAgICBvcGFjaXR5OiAxO1xcbiAgICB9XFxuICAgIDEwMCUge1xcbiAgICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoLTMyMGRlZyk7XFxuICAgICAgb3BhY2l0eTogMDtcXG4gICAgfVxcbiAgfVxcbiAgQC1tb3ota2V5ZnJhbWVzIHNwaW5vZmZQdWxzZSB7XFxuICAgIDAlIHtcXG4gICAgICAtbW96LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xcbiAgICB9XFxuICAgIDEwMCUge1xcbiAgICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcXG4gICAgfVxcbiAgfVxcbiAgQC13ZWJraXQta2V5ZnJhbWVzIHNwaW5QdWxzZSB7XFxuICAgIDAlIHtcXG4gICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDE2MGRlZyk7XFxuICAgICAgb3BhY2l0eTogMDtcXG4gICAgICBib3gtc2hhZG93OiAwIDAgMXB4ICMyMTg3ZTc7XFxuICAgIH1cXG4gICAgNTAlIHtcXG4gICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDE0NWRlZyk7XFxuICAgICAgb3BhY2l0eTogMTtcXG4gICAgfVxcbiAgICAxMDAlIHtcXG4gICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC0zMjBkZWcpO1xcbiAgICAgIG9wYWNpdHk6IDA7XFxuICAgIH1cXG4gIH1cXG4gIEAtd2Via2l0LWtleWZyYW1lcyBzcGlub2ZmUHVsc2Uge1xcbiAgICAwJSB7XFxuICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcXG4gICAgfVxcbiAgICAxMDAlIHtcXG4gICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIFwiXVxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqXG4gKiBAbm9jb2xsYXBzZVxuICovXG5UcmVlTWFwQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgIHsgdHlwZTogTWFwTG9hZGVyU2VydmljZSwgfSxcbl07IH07XG5UcmVlTWFwQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgICd3aWR0aCc6IFt7IHR5cGU6IF9hbmd1bGFyX2NvcmUuSW5wdXQgfSxdLFxuICAgICdoZWlnaHQnOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbiAgICAnZGF0YSc6IFt7IHR5cGU6IF9hbmd1bGFyX2NvcmUuSW5wdXQgfSxdLFxuICAgICdtaW5Db2xvcic6IFt7IHR5cGU6IF9hbmd1bGFyX2NvcmUuSW5wdXQgfSxdLFxuICAgICdtaWRDb2xvcic6IFt7IHR5cGU6IF9hbmd1bGFyX2NvcmUuSW5wdXQgfSxdLFxuICAgICdtYXhDb2xvcic6IFt7IHR5cGU6IF9hbmd1bGFyX2NvcmUuSW5wdXQgfSxdLFxuICAgICdzaG93U2NhbGUnOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLklucHV0IH0sXSxcbiAgICAnbWF4UG9zdERlcHRoJzogW3sgdHlwZTogX2FuZ3VsYXJfY29yZS5JbnB1dCB9LF0sXG4gICAgJ21hcHRsZUNvbXAnOiBbeyB0eXBlOiBfYW5ndWxhcl9jb3JlLkNvbnRlbnRDaGlsZHJlbiwgYXJnczogW01hcFRpdGxlQ29tcG9uZW50LF0gfSxdLFxufTtcblxudmFyIEFtZXhpb01hcHNNb2R1bGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFtZXhpb01hcHNNb2R1bGUoKSB7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgQW1leGlvTWFwc01vZHVsZS5mb3JSb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IEFtZXhpb01hcHNNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtNYXBMb2FkZXJTZXJ2aWNlXVxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIEFtZXhpb01hcHNNb2R1bGU7XG59KCkpO1xuQW1leGlvTWFwc01vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogX2FuZ3VsYXJfY29yZS5OZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIF9hbmd1bGFyX2NvbW1vbi5Db21tb25Nb2R1bGVcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICBNYXBQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgICAgICBHZW9DaGFydENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgVHJlZU1hcENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTWFwVGl0bGVDb21wb25lbnRcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgTWFwUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgR2VvQ2hhcnRDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIFRyZWVNYXBDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE1hcFRpdGxlQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtNYXBMb2FkZXJTZXJ2aWNlXVxuICAgICAgICAgICAgfSxdIH0sXG5dO1xuLyoqXG4gKiBAbm9jb2xsYXBzZVxuICovXG5BbWV4aW9NYXBzTW9kdWxlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XG5cbmV4cG9ydHMuQW1leGlvTWFwc01vZHVsZSA9IEFtZXhpb01hcHNNb2R1bGU7XG5leHBvcnRzLk1hcFByb3BlcnRpZXMgPSBNYXBQcm9wZXJ0aWVzO1xuZXhwb3J0cy5HZW9DaGFydENvbXBvbmVudCA9IEdlb0NoYXJ0Q29tcG9uZW50O1xuZXhwb3J0cy5UcmVlTWFwQ29tcG9uZW50ID0gVHJlZU1hcENvbXBvbmVudDtcbmV4cG9ydHMuTWFwVGl0bGVDb21wb25lbnQgPSBNYXBUaXRsZUNvbXBvbmVudDtcbmV4cG9ydHMuTWFwTG9hZGVyU2VydmljZSA9IE1hcExvYWRlclNlcnZpY2U7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG4iXX0=